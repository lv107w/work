<!DOCTYPE html>
<html lang="zh-cn">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>数据处理</title>
</head>

<body>
  <script>
    /*
      从某数据库接口得到如下值：
      {
        rows: [
          ["Lisa", 16, "Female", "2000-12-01"],
          ["Bob", 22, "Male", "1996-01-21"]
        ],
          metaData: [
            { name: "name", note: '' },
            { name: "age", note: '' },
            { name: "gender", note: '' },
            { name: "birthday", note: '' }
          ]
      }
  
  
      rows是数据，metaData是对数据的说明。现写一个函数parseData，将上面的对象转化为期望的数组：
  
        [
          { name: "Lisa", age: 16, gender: "Female", birthday: "2000-12-01" },
          { name: "Bob", age: 22, gender: "Male", birthday: "1996-01-21" },
        ]

        [1,2,3] = > [2,3,4] 
        filter 排除某些项
        reduce 对数组每一项进行叠加最终归并到一个值
        map  基于每一项原本值进行处理后返回到一个新数组 长度一样
       */


    var data = {
      rows: [
        ["Lisa", 16, "Female", "2000-12-01"],
        ["Bob", 22, "Male", "1996-01-21"]
      ],
      metaData: [
        { name: "name", note: '' },
        { name: "age", note: '' },
        { name: "gender", note: '' },
        { name: "birthday", note: '' }
      ]
    }

    function formatting(data) {
      var rows = data.rows;
      var metaData = data.metaData;
      if (!Array.isArray(rows) || !Array.isArray(metaData) || rows.length === 0 || metaData.length === 0) {
        return [];
      }
      return rows.map(function (item, idx, arr) {
        return item.reduce(function (acc, curr, idx) {
          acc[metaData[idx]["name"]] = curr;
          return acc;
        }, {})
      })

    }

    console.log(formatting(data));





  </script>
</body>

</html>