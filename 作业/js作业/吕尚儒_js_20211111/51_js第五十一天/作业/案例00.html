<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>递归案例</title>
</head>
<body>
  <script>
    /*
    1 编写一个函数实现n^k (n的k次方)，使用递归实现。
    2 角谷定理。输入一个自然数，若为偶数，则把它除以2，若为奇数，则把它乘以3加1。经过如此有限次运算后，总可以得到自然数值1。求经过多少次可得到自然数1。
    3 一个人赶着鸭子去每个村庄卖，每经过一个村子卖去所赶鸭子的一半又一只。这样他经过了7个村子后还剩2鸭子，问他出发时共赶多少只鸭子？经过每个村子卖出多少只鸭子？
    4 数列1,1,2,4,7,13,24,44,...求数列的第 n项 (找规律) 递归实现
    */

    //1 编写一个函数实现n^k (n的k次方)，使用递归实现。
    function getPow(n, k) {
      //前进阶段
      if(k > 1) {
        return n * getPow(n, --k);
      }
      //终止阶段
      return n;
    }

    console.log(getPow(3, 3)); //27


    //角谷定理。输入一个自然数，若为偶数，则把它除以2，若为奇数，则把它乘以3加1。经过如此有限次运算后，总可以得到自然数值1。求经过多少次可得到自然数1。
  /*   function fn1(n, c = 0) {
      c++;
      //终止阶段
      if(n === 2) {
        return c;
      }
      //前进阶段
      if(n % 2 === 0){
        return fn1(n / 2, c);
      } else {
        return fn1(n * 3 + 1, c);
      }
    } */
    function fn1(n, c = 0) {
      c++;
      if(n === 2) {
        return c;
      }
      return fn1(((n % 2 === 0) ? n /2 : n * 3 + 1), c);
    }

    console.log(fn1(8)); //3


    //一个人赶着鸭子去每个村庄卖，每经过一个村子卖去所赶鸭子的一半又一只。这样他经过了7个村子后还剩2鸭子，问他出发时共赶多少只鸭子？经过每个村子卖出多少只鸭子？
/*     function fn2(n, c) { //n:经过第c个村子的鸭子总数 c:经过几个村子
      
      //终止阶段
      if(c === 0) {
        return n;
      }
      console.log(`经过第${c}个村子，卖掉的鸭子为${n + 2}个`);
      //前进阶段
      return fn2((n + 1) * 2, --c)
      console.log();
    }

    console.log(fn2(2, 7)); */
    function fn2(n, t, arr = []) {
      if(t === 0) {
        return {
          first: n,
          arr: arr
        };
      }
      arr.unshift(n + 2);
      return fn2((n + 1) * 2, --t, arr);
    }

    console.log(fn2(2, 7)); //{[256, 128, 64, 32, 16, 8, 4], first: 510}


    //数列1,1,2,4,7,13,24,44,...求数列的第 n项 (找规律) 递归实现
    function fn3(n) {
       //终止阶段
       if(n < 2) {
        return 1;
      } else if(n === 2) {
        return n;
      }
      //前进阶段
      return fn3(n - 1) + fn3(n - 2) + fn3(n - 3);
    }

    console.log(fn3(5));
  </script>
</body>
</html>