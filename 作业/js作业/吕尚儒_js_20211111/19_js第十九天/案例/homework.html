<!DOCTYPE html>
<html lang="zh-cn">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>作业 - 数据处理题目</title>
</head>

<body>
  <script>
    /*
     将下面这个对象转为数组 并实现 一个排序方法 一个筛选方法 
   */

    /*
     例子 :
     
      formattingSort('height');   调用 formattingSort 传参 'height' 就以height属性值为排序属性 升序排序
 
      [{
        name: 'Dan',
        age: 1,
        sex: 1,
        weight: '79kg',
        height: '110cm'
      },
      {
        name: 'meney',
        age: 4,
        sex: 1,
        weight: '69kg',
        height: '160cm'
      },
      {
        name: 'joker',
        age: 1,
        sex: 0,
        weight: '99kg',
        height: '190cm'
      },
      {
        name: 'jojo',
        age: 18,
        sex: 1,
        weight: '90kg',
        height: '195cm'
      },
      {
        name: 'stack',
        age: 99,
        sex: 1,
        weight: '199kg',
        height: '1190cm'
      }]
 
 
 
       formattingFilter('age',function(item){
         return item > 10;
       });
 
       调用 formattingFilter 传参 'age' 和回调函数 
       以age属性为过滤条件 条件为 function回调函数的return公式
 
         
      [{
        name: 'jojo',
        age: 18,
        sex: 1,
        weight: '90kg',
        height: '195cm'
      },
      {
        name: 'stack',
        age: 99,
        sex: 1,
        weight: '199kg',
        height: '1190cm'
      }]
    
    */


    var oData = {
      'joker': {
        age: 1,
        sex: 0,
        weight: '99kg',
        height: '190cm'
      },
      'meney': {
        age: 4,
        sex: 1,
        weight: '69kg',
        height: '160cm'
      },
      'Dan': {
        age: 1,
        sex: 1,
        weight: '79kg',
        height: '110cm'
      },
      'jojo': {
        age: 18,
        sex: 1,
        weight: '90kg',
        height: 'cm'
      },
      'stack': {
        age: 99,
        sex: 1,
        weight: '199kg',
        height: '1190cm'
      }
    }

    var oData1 = {
      'joker': {
        age: 1,
        sex: 0,
        weight: '99kg',
        height: '190cm'
      },
      'meney': {
        age: 4,
        sex: 1,
        weight: '69kg',
        height: '160cm'
      },
      'Dan': {
        age: 1,
        sex: 1,
        weight: '79kg',
        height: '110cm'
      },
      'jojo': {
        age: 18,
        sex: 1,
        weight: '90kg',
        height: '195cm'
      },
      'stack': {
        age: 99,
        sex: 1,
        weight: '199kg',
        height: '1190cm'
      }
    }

    //处理形的函数 不要直接使用外部变量 保证成为一个 纯函数 有输入 有输出
    function formatting(data) {
      var resultArr = Object.keys(data); //["joker", "meney", "Dan", "jojo", "stack"]
      return resultArr.map(function (item) {
        return Object.assign({ name: item }, data[item])
      });
    }
    function dataSort(data, key) {
      if (typeof data[0][key] === 'undefined') {
        return data;
      }
      data.sort(function (a, b) {
        var aX = parseFloat(a[key]), bX = parseFloat(b[key]);
        aX = aX || 0;
        bX = bX || 0;
        return aX - bX;
      });
      return data;
    }
    console.log(dataSort(formatting(oData), 'agx'));
    function dataFilter(data, key, callback) {
      return data.filter(function (item, idx, arr) {
        //return 结果 布尔值 true false callback执行结果返回值需要是一个boolea
        return callback(item[key]); //item[key] => 18
      })
    }
    console.log(dataFilter(formatting(oData), 'age', function (o) {
      return o < 10; //boolean
    }))

    //flat 重组二维 % slice 循环

  </script>
</body>

</html>